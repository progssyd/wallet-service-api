Implementation Details – Matching the Requirements
شرح مبسط للمشروع (Wallet Service API)
بنيت API بسيطة وآمنة لمحفظة إلكترونية باستخدام Laravel 11 و MySQL.
إيه اللي موجود؟

إنشاء محفظة جديدة: تدخل اسم صاحبها والعملة (مثل USD)، وتبدأ برصيد صفر.
عرض المحافظ: تشوف كل المحافظ أو تفلتر حسب الاسم أو العملة.
إيداع فلوس: تضيف مبلغ لأي محفظة، ولو كررت نفس الطلب بنفس المفتاح ما يضيفش تاني (idempotent).
سحب فلوس: تسحب مبلغ، لو الرصيد مش كافي يرفض الطلب فورًا.
تحويل بين محفظتين: تحول فلوس من محفظة لمحفظة تانية في عملية واحدة آمنة (atomic)، بشرط:
نفس العملة
مش تحول لنفس المحفظة
رصيد كافي
لو كررت الطلب ما يتكررش التحويل

عرض الرصيد: تشوف رصيد أي محفظة بسهولة.
تاريخ المعاملات: تشوف كل العمليات على المحفظة (إيداع، سحب، تحويل) مع فلترة حسب النوع أو التاريخ، وتقسيم صفحات.
فحص الصحة: endpoint بسيط يرجع "ok" عشان تعرف إن الـ API شغالة.

نقاط مهمة نفذتها بدقة:

الفلوس مخزنة كأرقام صحيحة (minor units) عشان الدقة 100% (مفيش float).
كل عملية مالية آمنة تمامًا (ما يحصلش نص عملية).
التحويلات مسجلة مرتين (دخل وخرج) عشان التتبع الدقيق.
رفض أي مبلغ سالب أو صفر.
كل العمليات المالية ما تتكررش لو الطلب اتكرر (idempotency).

ليه التصميم كده؟

الكود منظم: منطق الفلوس في كلاس منفصل (WalletService) عشان سهل التعديل والاختبار.
استخدمت endpoint /wallets/{id}/transfer بدل /transfers عشان يكون أوضح وأكثر أمانًا (المحفظة المرسلة واضحة في الرابط).

المشروع كامل، شغال، ومغطي كل المتطلبات بدقة عالية.
جاهز للتشغيل بمجرد composer install + php artisan migrate + php artisan serve.
